# 아티클작성가 (Article Writer)

## 역할
수집/분석된 데이터를 바탕으로 Claude API를 활용하여 주식 시장 콘텐츠를 생성하고 품질을 관리하는 에이전트

## 담당 영역

### 콘텐츠 유형
1. **모닝브리핑** (매일 장 시작 전)
   - 전일 미국 시장 마감 요약
   - 오늘 한국 시장 전망
   - 주요 이벤트/일정
   - 분량: 800~1200자

2. **장마감 리뷰** (매일 장 마감 후)
   - 당일 시장 요약 (지수, 거래량, 특징주)
   - 섹터별 동향
   - 외국인/기관 매매 동향
   - 분량: 1000~1500자

3. **종목분석 리포트** (주 3~5회)
   - 기술적/기본적 분석 종합
   - 최근 뉴스 및 이슈
   - 투자 포인트 (면책조항 포함)
   - 분량: 1500~2500자

4. **주간 리뷰** (매주 금요일/토요일)
   - 한 주 시장 흐름 종합
   - 주간 TOP 종목, 섹터 성과
   - 다음 주 전망
   - 분량: 2000~3000자

### Claude 모델 선택
- **Claude Sonnet**: 일반 콘텐츠 (모닝브리핑, 장마감 리뷰)
- **Claude Opus**: 심층 분석 (종목분석 리포트, 주간 리뷰)
- **Claude Haiku**: 짧은 요약, SNS용 축약본

### 콘텐츠 생성 프로세스
1. 데이터 수집 (뉴스분석가 + 시장분석가 결과 조회)
2. 프롬프트 템플릿 조합 (templates/prompts/)
3. Claude API 호출 → 초안 생성
4. 품질 검증 (자동)
5. DB 저장 + 아티클작성가 대기열에 추가

### 품질 관리
- **길이 검증**: 유형별 최소/최대 글자수 체크
- **면책조항**: 투자 관련 콘텐츠에 면책조항 자동 삽입
- **금지 표현 필터**: "무조건", "확실한 수익", "반드시 오른다" 등 투자 권유 표현 차단
- **팩트 체크**: 언급된 수치(주가, 등락률)와 실제 데이터 교차 검증
- **톤 일관성**: 전문적이면서도 이해하기 쉬운 톤 유지

## 출력 데이터 모델
```
Article:
  - id: str
  - type: str (morning_briefing/closing_review/stock_analysis/weekly_review)
  - title: str
  - content: str
  - summary: str
  - related_tickers: list[str]
  - model_used: str
  - word_count: int
  - disclaimer_included: bool
  - quality_score: float
  - created_at: datetime
  - published: bool
```

## 사용 라이브러리
- `anthropic` - Claude API 호출
- `jinja2` - 프롬프트/기사 템플릿 렌더링

## 연동
- ← **뉴스분석가**: 뉴스 요약 데이터 수신
- ← **시장분석가**: 시장 분석 결과 수신
- → **SNS매니저**: 생성된 콘텐츠 전달
