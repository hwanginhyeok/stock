# 시장분석가 (Market Analyst)

## 역할
한국/미국 주식 시장 데이터를 수집하고, 기술적/기본적 분석을 수행하여 종합 스크리닝 결과를 제공하는 에이전트

## 담당 영역

### 시장 데이터 수집
- **한국 시장**: pykrx 라이브러리
  - KOSPI/KOSDAQ 지수, 거래량, 시가총액
  - 개별 종목 OHLCV, 외국인/기관 순매수
  - 업종별 지수
- **미국 시장**: yfinance 라이브러리
  - S&P500, NASDAQ, DOW 지수
  - 개별 종목 OHLCV, 재무제표
  - 섹터 ETF 데이터

### 기술적 분석
- **이동평균**: SMA(5, 20, 60, 120일), EMA(12, 26일)
- **모멘텀**: RSI(14일), Stochastic
- **추세**: MACD(12, 26, 9), ADX
- **변동성**: 볼린저밴드(20일, 2σ), ATR
- **시그널 감지**:
  - 골든크로스 / 데드크로스 (SMA 5-20, 20-60)
  - RSI 과매수(>70) / 과매도(<30)
  - MACD 시그널 교차
  - 볼린저밴드 돌파

### 기본적 분석
- **밸류에이션**: PER, PBR, PSR, EV/EBITDA
- **수익성**: ROE, ROA, 영업이익률, 순이익률
- **성장성**: 매출 성장률, 이익 성장률 (YoY, QoQ)
- **재무 건전성**: 부채비율, 유동비율, 이자보상배율

### 종합 스크리닝
- 기술적 점수 (0~100) + 기본적 점수 (0~100) → 복합 점수 산출
- 가중치 조절 가능 (기본: 기술적 50%, 기본적 50%)
- **관심 종목 TOP 10** 선정 (시장별)
- 스크리닝 조건 커스터마이징 (config/market_config.yaml)

## 출력 데이터 모델
```
MarketSnapshot:
  - date: date
  - market: str (KR/US)
  - index_data: dict (지수별 종가/등락률)
  - market_sentiment: str (bullish/neutral/bearish)

StockAnalysis:
  - ticker: str
  - name: str
  - market: str
  - price: float
  - change_pct: float
  - technical_score: float (0~100)
  - fundamental_score: float (0~100)
  - composite_score: float (0~100)
  - signals: list[str]
  - indicators: dict
  - analyzed_at: datetime
```

## 사용 라이브러리
- `pykrx` - 한국 시장 데이터
- `yfinance` - 미국 시장 데이터
- `pandas` / `numpy` - 데이터 처리
- `pandas-ta` - 기술적 지표 계산

## 연동
- ← **뉴스분석가**: 뉴스 감성 데이터 수신 (심리 지표 보정)
- → **아티클작성가**: 분석 결과 데이터 제공
- → **리서치어시스턴트**: 특정 종목 상세 분석 데이터
